<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Watch colorful balls bounce and compete in a physics simulation. Last ball standing wins! A mesmerizing ball physics game with collision detection.">
    <meta name="keywords" content="ball physics, simulation game, bouncing balls, physics game, collision detection, paper game">
    <meta name="author" content="Prabhakar Gupta">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta property="og:title" content="Bouncing Balls - Physics Simulation Game">
    <meta property="og:description" content="Watch colorful balls bounce and compete in a physics simulation. Last ball standing wins!">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://prabhakar267.github.io/paper-games/bouncing-balls/assets/banner_image_generated.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Bouncing Balls - Physics Simulation Game">
    <meta name="twitter:description" content="Watch colorful balls bounce and compete in a physics simulation. Last ball standing wins!">
    <meta name="twitter:image" content="https://prabhakar267.github.io/paper-games/bouncing-balls/assets/banner_image_generated.png">
    <title>Bouncing Balls - Physics Simulation Game</title>
    <link rel="icon" type="image/png" href="https://prabhakar267.github.io/paper-games/common/assets/colored-pencil.png">
    <link rel="apple-touch-icon" href="https://prabhakar267.github.io/paper-games/common/assets/colored-pencil.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../common/styles.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-57220954-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>
    <div class="container">
        <h1>‚öΩ Ball Physics Simulation</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="numBalls">Number of Balls:</label>
                <input type="number" id="numBalls" min="2" max="50" value="8">
            </div>
            
            <div class="control-group">
                <label>Arena Size:</label>
                <button id="mediumArenaBtn" class="speed-btn active">‚ö™ Medium</button>
                <button id="fullScreenArenaBtn" class="speed-btn">üì± Full Screen</button>
            </div>
            
            <div class="control-group">
                <label>Speed:</label>
                <button id="fastBtn" class="speed-btn active">üöÄ Fast</button>
                <button id="superFastBtn" class="speed-btn">‚ö° Super Fast</button>
            </div>
            
            <button id="startBtn" class="btn-primary">Start Simulation</button>
            <div style="text-align: center; margin-top: 15px;">
                <a href="../" class="btn-secondary" style="display: inline-block; text-decoration: none;">Back to Games</a>
            </div>
        </div>
        
        <canvas id="canvas" width="600" height="600"></canvas>
        
        <!-- Full Screen Overlay Controls -->
        <div id="fullscreenControls" class="fullscreen-controls">
            <button id="fullscreenStartBtn" class="fullscreen-control-btn" title="Start/Stop">‚ñ∂Ô∏è</button>
            <button id="fullscreenExitBtn" class="fullscreen-control-btn" title="Exit Fullscreen">‚ùå</button>
        </div>

        <div class="info-sections">
            <div class="collapsible-section">
                <div class="section-header" onclick="toggleSection('rules')">
                    <h3>How It Works</h3>
                    <span class="toggle-icon collapsed" id="rules-icon">‚ñ∂</span>
                </div>
                <div class="section-content collapsed" id="rules-content">
                    <ul>
                        <li><strong>Arena Physics:</strong> Balls bounce inside a circular arena with realistic gravity, air resistance, and energy loss on wall impacts</li>
                        <li><strong>Line Creation:</strong> When a ball hits the arena wall, it creates a colored line from the wall contact point to the ball's center</li>
                        <li><strong>Dynamic Lines:</strong> These lines stay attached to their ball and move with it as the ball continues bouncing</li>
                        <li><strong>Line Crossing:</strong> When any ball's path crosses another ball's line, that line is instantly destroyed</li>
                        <li><strong>Elimination:</strong> A ball is eliminated when all of its lines have been crossed and destroyed (it must have created at least one line first)</li>
                        <li><strong>Victory:</strong> The last ball with remaining lines wins! Strategy involves protecting your lines while destroying others'</li>
                        <li><strong>Visual Trails:</strong> Balls leave fading motion trails behind them to show their path (these are separate from the elimination lines)</li>
                    </ul>
                </div>
            </div>
            
            <div class="collapsible-section">
                <div class="section-header" onclick="toggleSection('physics')">
                    <h3>Physics & Mechanics Details</h3>
                    <span class="toggle-icon collapsed" id="physics-icon">‚ñ∂</span>
                </div>
                <div class="section-content collapsed" id="physics-content">
                    <p><strong>Gravity & Damping:</strong> Balls experience constant downward gravity (0.15 px/frame¬≤) and air resistance (0.9995 damping factor), creating natural-looking motion. A minimum velocity boost prevents balls from getting stuck.</p>
                    
                    <p><strong>Wall Collisions:</strong> When a ball hits the circular arena wall, it reflects with 99% energy retention. Each wall bounce creates a colored line segment from the wall contact point to the ball's center. These lines are permanently attached to the ball and move with it.</p>
                    
                    <p><strong>Ball-to-Ball Collisions:</strong> When two balls collide, they exchange velocities along the collision axis (elastic collision). Their speeds are averaged to prevent energy accumulation. Importantly, ball collisions do NOT create lines - only wall hits do.</p>
                    
                    <p><strong>Line Destruction System:</strong> Every frame, the simulation checks if any ball's current position crosses any line segment using circle-line distance calculations. When a crossing is detected, that line is immediately removed. A ball can cross its own lines if it currently has no lines remaining.</p>
                    
                    <p><strong>Elimination Rules:</strong> A ball is removed from the game when:</p>
                    <ul>
                        <li>It has created at least one line (has bounced off a wall)</li>
                        <li>All of its lines have been crossed and destroyed</li>
                        <li>There are still multiple balls remaining in the arena</li>
                    </ul>
                    
                    <p><strong>Motion Trails:</strong> For visual effect, each ball maintains a 15-segment motion trail that fades from 0% to 60% opacity. These trails show recent movement but do not affect gameplay - they're purely cosmetic, unlike the elimination lines.</p>
                    
                    <p><strong>Arena Sizes:</strong> Choose between Medium (700px diameter) or Full Screen mode (fills viewport with 5% padding). Ball size remains constant at 7px radius regardless of arena size.</p>
                    
                    <p><strong>Speed Modes:</strong> Fast mode uses 2.5√ó base speed, Super Fast uses 5√ó base speed. Initial velocity directions are random.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="../common/utils.js"></script>
    <script src="script.js"></script>
</body>
</html>
